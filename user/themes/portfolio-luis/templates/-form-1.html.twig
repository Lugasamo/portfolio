{% extends 'partials/base.html.twig' %}
{% block content %}

{# Header #} 
{% if page.header.title %}
    {% include 'partials/hero.html.twig' %}
{% endif %}

<div class="px-6 py-4 xl:px-8 xl:py-12 bg-gray-100">
    <div class="flex flex-row flex-wrap">

      {# ✅ left #}
      <main role="main" class="w-full lg:w-2/3 xl:w-3/4 pt-1 px-4 py-6 xl:px-8 xl:py-12 rounded-3xl shadow-xl mb-12 bg-white bg-opacity-90">
          
          {% if form.message %}
              <div class="mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded">
                  {{ form.message }}
              </div>
          {% endif %}
          
          {% if form.errors %}
              <div class="mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded">
                  <ul>
                      {% for error in form.errors %}
                          <li>{{ error }}</li>
                      {% endfor %}
                  </ul>
              </div>
          {% endif %}
          
          <form method="post" action="{{ form.action }}" enctype="multipart/form-data">
              
              <!-- Name fields row -->
              <div class="flex flex-wrap -mx-3 mb-6">
                  {% for field in form.fields %}
                      {% if field.name == 'firstname' or field.name == 'lastname' %}
                          <div class="w-full xl:w-1/2 px-3">
                              <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="{{ field.name }}">
                                  {{ field.label }}
                                  {% if field.validate.required %}
                                      <span class="text-red-500">*</span>
                                  {% endif %}
                              </label>
                              <input
                                  id="{{ field.name }}"
                                  name="{{ field.name }}"
                                  type="{{ field.type }}"
                                  value="{{ form.value(field.name)|e }}"
                                  placeholder="{{ field.placeholder }}"
                                  class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 {% if attribute(form.errors, field.name) %}border-red-500{% endif %}"
                                  {% if field.validate.required %}required{% endif %}
                              />
                              {% if attribute(form.errors, field.name) %}
                                  <p class="text-red-500 text-xs mt-1">{{ attribute(form.errors, field.name) }}</p>
                              {% endif %}
                          </div>
                      {% endif %}
                  {% endfor %}
              </div>
              
              <!-- Other fields (email, message, etc.) -->
              {% for field in form.fields %}
                  {% if field.name != 'firstname' and field.name != 'lastname' %}
                      <div class="flex flex-wrap -mx-3 mb-6">
                          <div class="w-full px-3">
                              <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="{{ field.name }}">
                                  {{ field.label }}
                                  {% if field.validate.required %}
                                      <span class="text-red-500">*</span>
                                  {% endif %}
                              </label>
                              
                              {% if field.type == 'textarea' %}
                                  <textarea
                                      id="{{ field.name }}"
                                      name="{{ field.name }}"
                                      placeholder="{{ field.placeholder }}"
                                      rows="5"
                                      class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 {% if attribute(form.errors, field.name) %}border-red-500{% endif %}"
                                      {% if field.validate.required %}required{% endif %}
                                  >{{ form.value(field.name)|e }}</textarea>
                              {% else %}
                                  <input
                                      id="{{ field.name }}"
                                      name="{{ field.name }}"
                                      type="{{ field.type }}"
                                      value="{{ form.value(field.name)|e }}"
                                      placeholder="{{ field.placeholder }}"
                                      class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 {% if attribute(form.errors, field.name) %}border-red-500{% endif %}"
                                      {% if field.validate.required %}required{% endif %}
                                  />
                              {% endif %}
                              
                              {% if attribute(form.errors, field.name) %}
                                  <p class="text-red-500 text-xs mt-1">{{ attribute(form.errors, field.name) }}</p>
                              {% endif %}
                          </div>
                      </div>
                  {% endif %}
              {% endfor %}
              
              <!-- Submit button -->
              <div class="flex flex-wrap -mx-3">
                  <div class="w-full px-3">
                      {% for button in form.buttons %}
                          <button 
                              type="{{ button.type }}"
                              class="bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
                          >
                              {{ button.value|default('Submit') }}
                          </button>
                      {% endfor %}
                  </div>
              </div>
              
              <!-- Hidden fields for form processing -->
              {{ form.getNonce() }}
              {{ form.getAction() }}
              
          </form>
      </main>

      {# ✅ right #}
      <aside class="w-full lg:w-1/3 xl:w-3/12 {#bg-amber-200#}">
        <div class="sticky top-0 pt-1 pb-2 xl:px-12 xl:py-16 ml-12 mb-12 rounded-3xl shadow-xl space-y-6 bg-slate-50 bg-opacity-90">


        </div>
      </aside>

    </div>

</div>

{# profile #} 
{% if page.header.profile %}
    {% include 'partials/profile.html.twig' %}
{% endif %}

  
{% endblock %}