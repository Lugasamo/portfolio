{% extends 'partials/base.html.twig' %}
{% block content %}

{# Header #} 
{% if page.header.title %}
    {% include 'partials/hero.html.twig' %}
{% endif %}

<div class="px-6 py-4 xl:px-8 xl:py-12 bg-gray-100">
    <div class="flex flex-row flex-wrap">
      {# ✅ left #}
      <main role="main" class="w-full mb-12 lg:w-2/3 xl:w-3/4 p-ls-padding-v p-ls-padding-h rounded-3xl shadow-lg bg-white bg-opacity-90">

        {% if page.content %}
          <div class="flex-col space-y-8">

            <div class="paragraph">
              <h1 class="text-4xl font-semibold pb-4">{{ page.header.hero_title|raw }}</h1>
              <p>{{ page.content|raw }}</p>
            </div>

            {# ✅ project Images #}
            {% if header.project_media %}
              <section>
                <div class="w-full mb-0 project-media">
                  {% for file in header.project_media %}
                    {% set image = page.media.images[file.name] %}
                    {% set video = page.media.files[file.name] %}
                    
                    {% if image %}
                    <div class="delay-[300ms] duration-[600ms] taos:translate-y-[10%] taos:opacity-0" data-taos-offset="300">
                      <img
                          src="{{ image.url }}"
                          alt="{{ file.name }}"
                          class="w-full my-8 rounded-xl shadow cursor-pointer hover:shadow-lg"
                          loading="lazy"
                          onclick="openModal({{ loop.index0 }})"
                        />
                    </div>
                    {% elseif video and video.type starts with 'video' %}
                      <video
                        controls
                        class="w-full my-4"
                        preload="metadata"
                        onclick="openModal({{ loop.index0 }})"
                      >
                        <source src="{{ video.url }}" type="{{ video.type }}">
                        Your browser does not support the video tag.
                      </video>
                    {% endif %}
                  {% endfor %}
                </div>
              </section>
            {% endif %}

          </div>
        {% endif %}
      </main>

      {# ✅ right #}
      <aside class="w-full lg:w-1/3 xl:w-3/12 delay-[300ms] duration-[600ms] taos:translate-y-[10%] taos:opacity-0" data-taos-offset="300">

        <div class="sticky top-0 py-6 sm:py-4 lg:py-12 px-4 sm:px-2 lg:px-8 ml-10 mb-12 rounded-3xl shadow-lg space-y-4 bg-slate-50 bg-opacity-90">

        {% if page.parent %}
          <a href="{{ page.parent.url }}" class="inline-flex items-center text-primary-50 hover:underline">
            ← Back to {{ page.parent.title }}
          </a>
        {% endif %}
        
        {% if page.header.client %}
        <h1 class="text-3xl">
          {{page.header.client}}
        </h1>
        {% endif %}

        {% if page.header.role %}
        <div class="pb-2">
          <label class="text-sm font-medium text-gray-500">Role</label>
          <p class="text-gray-900">{{page.header.role}}</p>
        </div>
        {% endif %}

        {% if page.header.duration %}
        <div class="pb-2">
          <label class="text-sm font-medium text-gray-500">Duration</label>
          <p class="text-gray-900">{{page.header.duration}}</p>
        </div>
        {% endif %}

        {% if page.header.tags %}
        <div class="pb-2">
          <ul class="flex space-x-2">
            {% for tag in page.header.tags %}
              <li class="inline-block bg-primary-100 text-black text-xs font-medium px-3 py-1 rounded-full">{{ tag }}</li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}

        {% if header.project_url %}
        <div class="pb-2">
          <a class="btn btn-primary bg-black font-medium text-white hover:bg-primary-100 hover:text-black" href="{{header.project_url}}" target="_blank">Visit site</a>
        </div>
        {% endif %}

        </div>
      </aside>
      
      {# ✅ under content #}
      <div class=" bg-gray-200 w-full flex flex-row pb-2 xl:px-12 xl:py-16 rounded-3xl shadow-lg delay-[150ms] duration-[300ms] taos:translate-y-[10%] taos:opacity-0" data-taos-offset="300">
        <div class="w-full pr-4">
          <h2 class="text-3xl py-2">Challenge</h2>
          <p class="text-gray-900">{{header.challenge}}</p>
        </div>
        <div class="w-full pl-4">
          <h2 class="text-3xl py-2">Solution</h2>
          <p class="text-gray-900">{{header.solution}}</p>
        </div>
      </div>

      {# ✅ design Process #}
      <div class=" bg-black text-white w-full mt-12 flex flex-row pb-2 xl:px-12 xl:py-16 rounded-3xl shadow-lg delay-[150ms] duration-[300ms] taos:translate-y-[10%] taos:opacity-0" data-taos-offset="300">
        <div class="w-full pr-4">
          <h2 class="text-3xl py-2">Design Process</h2>
        </div>
        <div class="w-full pl-4">
          <h2 class="text-3xl py-2">wdwhkwjdhj dwjkdhwjkdwhkjw dhjkwdh dwkjh wdjkhdw jk dwkjdw hkjwdhwdjk. dwkjhwdkjhdwkj h</h2>
          <p class="text-white">{{header.solution}}</p>
        </div>
      </div>

    </div>

</div>

{# profile #} 
{% if page.header.profile %}
    {% include 'partials/profile.html.twig' %}
{% endif %}

{# modal #} 
{% if header.project_media %}
    {% include 'partials/modal.html.twig' %}
{% endif %}
  
{% endblock %}