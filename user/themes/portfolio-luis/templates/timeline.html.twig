{% extends 'partials/base.html.twig' %}

{% block content %}

{# Header #} 
{% if page.header.title %}
    {% include 'partials/hero.html.twig' %}
{% endif %}

<section class="relative pt-20 pb-16 p-ls-padding-h text-black bg-gradient-to-b to-gray-100 from-white">
  <div class="container m-auto mb-20 text-center">
    {% if page.title %}
        <h1 class="text-4xl font-bold text-gray-900 mb-4">{{ page.title }}</h1>
    {% endif %}
    
    {% if page.header.subtitle %}
        <h2 class="text-xl text-black/60 font-light">{{ page.header.subtitle }}</h2>
    {% endif %}
    
    {% if page.content %}
        <div class="mt-6 text-xl text-black/80 leading-relaxed">
            {{ page.content|raw }}
        </div>
    {% endif %}
  </div>

  <main class=" w-2/5 m-auto">
    {% if page.header.timeline_items %}
    {% set items = page.header.timeline_items %}
    {% set sort_order = page.header.sort_order|default('asc') %}
    {% set timeline_style = page.header.timeline_style|default('vertical') %}
    {% set show_dates = page.header.show_dates|default(true) %}
    
    {# Sort items by date #}
    {% if sort_order == 'desc' %}
        {% set items = items|sort((a, b) => b.date <=> a.date) %}
    {% else %}
        {% set items = items|sort((a, b) => a.date <=> b.date) %}
    {% endif %}
      
      {% if timeline_style == 'vertical' %}
          <div class="relative pl-8">
              <!-- Timeline line -->
              <div class="absolute left-2 top-0 bottom-0 w-px bg-black/10"></div>
              
              {% for item in items %}
                  <div class="relative mb-8 pl-8">
                      <!-- Timeline marker -->
                      <div class="absolute -left-8 top-1 w-4 h-4 bg-primary-100 rounded-full shadow-md {% if item.featured %}w-4 h-4 bg-primary-50 -left-8 {% endif %} delay-[300ms] duration-[600ms] taos:scale-[0.6] taos:opacity-0" data-taos-offset="400"></div>
                      
                      <div class="shadow-lg bg-white bg-opacity-90 rounded-3xl p-ls-padding-v p-ls-padding-h {% if item.featured %} bg-primary-100/10{% endif %} delay-[300ms] duration-[600ms] taos:translate-y-[10%] taos:opacity-0" data-taos-offset="300">
                          {% if show_dates %}
                              <div class="text-sm text-gray-500 font-medium mb-2">
                                  {{ item.date|date('F j, Y') }}
                              </div>
                          {% endif %}
                          
                          <h3 class="text-xl font-semibold text-gray-900 mb-3">{{ item.title }}</h3>
                          
                          {% if item.category %}
                              <div class="mb-4">
                                  <span class="inline-block bg-primary-100 text-black text-xs font-medium px-3 py-1 rounded-full">{{ item.category }}</span>
                              </div>
                          {% endif %}
                          
                          {% if item.image %}
                              <div class="mb-4">
                                  <img src="{{ page.media[item.image].url }}" alt="{{ item.title }}" class="w-full h-48 object-cover rounded-lg">
                              </div>
                          {% endif %}
                          
                          {% if item.description %}
                              <div class="text-gray-600 mb-4 leading-relaxed">
                                  {{ item.description }}
                              </div>
                          {% endif %}
                          
                          {% if item.content %}
                              <div class="text-gray-700 leading-relaxed prose prose-sm max-w-none">
                                  {{ item.content|markdown }}
                              </div>
                          {% endif %}
                      </div>
                  </div>
              {% endfor %}
          </div>
          
      {% elseif timeline_style == 'horizontal' %}
          <div class="flex overflow-x-auto space-x-6 pb-4">
              {% for item in items %}
                  <div class="flex-shrink-0 w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-6 {% if item.featured %}ring-2 ring-orange-200{% endif %}">
                      {% if show_dates %}
                          <div class="text-sm text-gray-500 font-medium mb-2">
                              {{ item.date|date('F j, Y') }}
                          </div>
                      {% endif %}
                      
                      <h3 class="text-lg font-semibold text-gray-900 mb-3">{{ item.title }}</h3>
                      
                      {% if item.category %}
                          <div class="mb-4">
                              <span class="inline-block bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full">{{ item.category }}</span>
                          </div>
                      {% endif %}
                      
                      {% if item.image %}
                          <div class="mb-4">
                              <img src="{{ page.media[item.image].url }}" alt="{{ item.title }}" class="w-full h-32 object-cover rounded-lg">
                          </div>
                      {% endif %}
                      
                      {% if item.description %}
                          <div class="text-gray-600 mb-4 text-sm leading-relaxed">
                              {{ item.description }}
                          </div>
                      {% endif %}
                      
                      {% if item.content %}
                          <div class="text-gray-700 text-sm leading-relaxed prose prose-sm max-w-none">
                              {{ item.content|markdown }}
                          </div>
                      {% endif %}
                  </div>
              {% endfor %}
          </div>
          
      {% else %} <!-- Cards layout -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {% for item in items %}
                  <div class="bg-white rounded-lg shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-shadow duration-300 {% if item.featured %}ring-2 ring-orange-200{% endif %}">
                      {% if show_dates %}
                          <div class="text-sm text-gray-500 font-medium mb-2">
                              {{ item.date|date('F j, Y') }}
                          </div>
                      {% endif %}
                      
                      <h3 class="text-lg font-semibold text-gray-900 mb-3">{{ item.title }}</h3>
                      
                      {% if item.category %}
                          <div class="mb-4">
                              <span class="inline-block bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full">{{ item.category }}</span>
                          </div>
                      {% endif %}
                      
                      {% if item.image %}
                          <div class="mb-4">
                              <img src="{{ page.media[item.image].url }}" alt="{{ item.title }}" class="w-full h-40 object-cover rounded-lg">
                          </div>
                      {% endif %}
                      
                      {% if item.description %}
                          <div class="text-gray-600 mb-4 text-sm leading-relaxed">
                              {{ item.description }}
                          </div>
                      {% endif %}
                      
                      {% if item.content %}
                          <div class="text-gray-700 text-sm leading-relaxed prose prose-sm max-w-none">
                              {{ item.content|markdown }}
                          </div>
                      {% endif %}
                  </div>
              {% endfor %}
          </div>
      {% endif %}
      
  {% else %}
      <div class="text-center py-12">
          <p class="text-gray-500 italic">No timeline items have been added yet.</p>
      </div>
  {% endif %} 

  </main>
</section>

{# profile #} 
{% if page.header.profile %}
    {% include 'partials/profile.html.twig' %}
{% endif %}

{% endblock %}